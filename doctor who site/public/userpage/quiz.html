<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/quiz.css">
    <link rel="stylesheet" href="home.html">
    <link rel="stylesheet" href="../css/style-guia.css">

</head>

<body>
   
    <header>
        <div class="navbar">
            <div class="logo"> <img onclick="userpage()"
                        src="assets/imags/userlmn_1d29dd8f3801443652fa35798ce71482-removebg-preview (1).png" alt="">
                </a>
            </div>
            <p>|</p>
            <ul>
                <li><a href="home.html">home</a></li>
            </ul>
            <p>|</p>
            <ul>
                <li><a href="guia.html">Guia da série</a></li>
            </ul>
            <p>|</p>
            <ul>
                <li><a href="guia-personagens.html">Guia dos personagens</a> </li>
            </ul>
        </div>
    </header>

    <main> 
    
        <div class="menu" id="home"></div>

    <div class="quiz" id="Questao1" >
       
        <h1>
            Quiz Questão 1
        </h1>

        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores iste nam quia eligendi aperiam exercitationem odit laboriosam nisi accusantium! Aperiam nulla in illo modi ipsum atque ad eos consequuntur culpa?</p>
   
        <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 1)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 2</div>
    </div>

    <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 2</div>
    </div>
    </div>

    <div class="quiz" id="Questao2" style="display: none;">
       
        <h1>
            Quiz Questão 2
        </h1>

        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores iste nam quia eligendi aperiam exercitationem odit laboriosam nisi accusantium! Aperiam nulla in illo modi ipsum atque ad eos consequuntur culpa?</p>
   
        <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 2</div>
    </div>

    <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 1)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 2</div>
    </div>
    </div>

    <div class="quiz" id="Questao3"  style="display: none;">
       
        <h1>
            Quiz Questão 3
        </h1>

        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores iste nam quia eligendi aperiam exercitationem odit laboriosam nisi accusantium! Aperiam nulla in illo modi ipsum atque ad eos consequuntur culpa?</p>
   
        <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 2</div>
    </div>

    <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(1)"> Resposta 2</div>
    </div>
    </div>

    <div class="quiz" id="Questao4"  style="display: none;">
       
        <h1>
            Quiz Questão 4
        </h1>

        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores iste nam quia eligendi aperiam exercitationem odit laboriosam nisi accusantium! Aperiam nulla in illo modi ipsum atque ad eos consequuntur culpa?</p>
   
        <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(1)"> Resposta 2</div>
    </div>

    <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 2</div>
    </div>
    </div>

    <div class="quiz" id="Questao5" style="display: none;" >
       
        <h1>
            Quiz Questão 5
        </h1>

        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores iste nam quia eligendi aperiam exercitationem odit laboriosam nisi accusantium! Aperiam nulla in illo modi ipsum atque ad eos consequuntur culpa?</p>
   
        <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 1)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 2</div>
    </div>

    <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 2</div>
    </div>
    </div>

    <div class="quiz" id="Questao6"  style="display: none;">
       
        <h1>
            Quiz Questão 6
        </h1>

        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores iste nam quia eligendi aperiam exercitationem odit laboriosam nisi accusantium! Aperiam nulla in illo modi ipsum atque ad eos consequuntur culpa?</p>
   
        <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 1)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta( 0)"> Resposta 2</div>
    </div>

    <div class="estilo">
        <div class="respostaestilo" onclick="verificarresposta( 1)"> Resposta 1</div>
        <div class="respostaestilo" onclick="verificarresposta(0)"> Resposta 2</div>
    </div>
    </div>

    <div class="quiz" id="Questao7"  style="display: none;">
        <h1>
            Seu score total é <span id="score"></span>
        </h1>
    
        <h2>Maior pontuação: <span id="maxPontuacao"></span></h2>
        <h2>Menor pontuação: <span id="minPontuacao"></span></h2>

    
</main>
</body>

</html>
<script>

var username = sessionStorage.getItem("username");

        if (username) {
            buscarMinMaxPontuacao(username);
        }

        function buscarMinMaxPontuacao(username) {
            fetch(`/quiz/minmax/${username}`)
                .then(response => response.json())
                .then(data => {
                    minPontuacao.innerHTML = data.minPontuacao;
                    maxPontuacao.innerHTML = data.maxPontuacao;
                })
                .catch(error => console.error("Erro ao buscar pontuações:", error));
        }
     function userpage() {
       var menuhome = document.getElementById("home");

       if (menuhome.style.display === "none" || menuhome.style.display === "") {
           menuhome.style.display = "block";
       } else {
           menuhome.style.display = "none";
       }
   }

    var listaresposta = []
    var respostacorreta = 0

    var perguntaAtual = 1;

    function mostrarPergunta(perguntaAtual) {
        for (var numero = 1; numero <= 7; numero += 1) {
            var pergunta = document.getElementById("Questao" + numero)
            if (numero === perguntaAtual) {
                pergunta.style.display = "block"
            } else {
                pergunta.style.display = "none"
            }
        }

       
    }

    function verificarresposta(n) {
    if (n == 1) {
        listaresposta.push(n);
        console.log("resposta correta!");
    } else {
        console.log("resposta errada!");
    }

    respostacorreta = listaresposta.length;
    var username = sessionStorage.getItem("username");


   score.innerHTML= (listaresposta.length)

    if (respostacorreta >= 0) {
        perguntaAtual += 1;
        if (perguntaAtual <= 6) {
            setTimeout(function () {
                mostrarPergunta(perguntaAtual);
            }, 500);
        } else {
          
            fetch("/quiz/adicionar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    respostacorretaServer: respostacorreta,
                    usernameServer: username
                }),
            }).then(response => {
                if (response.ok) {
                    console.log("Pontuações enviadas com sucesso!");
                } else {
                    console.error("Erro ao enviar pontuações:", response.statusText);
                }
            }).catch(error => {
                console.error("Erro ao enviar pontuações:", error);
            });
            mostrarPergunta(7);
        }
       
    }
}

</script>